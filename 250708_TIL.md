## TIL - 2025.07.08

### 🔍 오늘 배운 내용

#### Java - 자바 심화: 입출력, 내부 클래스, 익명 클래스

**입출력**   
프로세스, 프로그램 기준으로 생각   
cpu -> hdd(세이브파일..) 출력임   

- 스트림:   
입출력을 위한 데이터 통로, 바이트 단위와 문자단위(lbyte)로 처리, 다른 단위는 커서 전송하기 어려움, 바이트 배열도 안됨   

- 파일입출력:      
파일로부터 데이터를 읽어오거나 파일에 데이터를 저장하는 작업
```
public class FileExample {
    // 경로의 '\'이 안되면 '/' 로 변경해서 사용
    public static final String ROOT_PATH = "c:/~~";
    public static void main(String[] args) {
        // 폴더 생성
        // 1. 생성할 폴더의 경로를 파일 객체로 매핑
        File rootDirectory = new File(ROOT_PATH);

        // 2.폴더 생성 명령
        // exists()는 해당 경로에 폴더(파일)이 있으면 true, 
        // 없으면 false를 반환
        if(!rootDirectory.exists()) {
            // 없으면 아래 내용 실행
            rootDirectory.mkdir();
        }

        // 파일 생성
        // 1. 파일이 저장될 경로와 파일명을 함께 파일 객체로 매핑
        File newFile = new File(ROOT_PATH + "저장될 파일명.확장자");
        if(newFile.exists()){
            // 파일을 읽거나 쓸 때 에러 발생 위험이 있어 예외처리 실행
            try {
                newFile.createNewFile();
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    }
}

``` 
- 바이트 기반 스트림   
: 1바이트 단위로 데이터 처리, 주로 이미지, 영상같은 바이너리 데이터 처리에 적합하다.   
InputStream, OutputStream

FileInputStream   
바이트 기반의 파일 입력 클래스, 바이너리 데이터 처리에 주로 사용됨 
```
public class FileInputExample {
    public static void main(String[] args) {
        try {
            FileInputStream fis = new FileInputStream(파일경로 + "저장될 파일명.확장자");
            int data = 0;
            // 파일 읽어오다가 없으면 
            // 바이트 스트림: -1
            // 문자 스트림: null
            
            // .read() 한 줄 씩 읽어옴
            while((data = fis.read() != -1)){
                System.out.writae(data);
                // 숫자를 아스키코드로 변환시켜 출력
            }
            // 출력 버퍼 비우기;
            // 출력할 때 필요
            System.out,flush(); 
        }
    }
}
```
FileOutputStream   
바이트 기반의 파일 출력 클래스, 바이너리 데이터 처리에 주로 사용됨.
```
public class FileOutputExample {
    public static void main(String[] args) {
        try{
            FileOutputStream fos = new FileOutputStream(파일경로 + "저장될 파일명.확장자");

            // str로 저장하기
            // getBytes는 문자열을 바이트 배열로 변환해 주는 메소드
            String str = "dog";
            fos.write(str.getBytes());

            // byte 배열로 저장하기
            // 바이트 배열의 숫자들은 아스키코드 변환을 통해 문자로 저장됨
            fos.write(new Bytes[] {99, 97, 116});
        } catch (FileNotFoundException e) {
            File rootDirectory = new File(폴더경로);
            if(!rootDirectory.exists()) {
                rootDirectory.mkdir();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```
바이트 스트림은 텍스트 처리가 불편하다.
입력할때 숫자, 불러올때도 숫자   

하드웨어에 접근할 때는 메모리 정리가 필요하다   
finally { 객체명.close() }   
** try ~ with ~ resources 명령 ** 을 사용하면 메모리정리가 필요한 객체에 대해 자동 클로즈처리를 해준다.

- 텍스트 기반 스트림   
텍스트만을 2바이트 단위로 입출력   
Reader, Writer   
FileWrite
```
public class FileWriteExample {
    public static void main(String[] args) {
        // try { 블록 안에 작성하던 내용을}
        // try(여기에 작성)
        try(FileWrite fw = new FileWrite(폴더경로 + "파일명.확장자")) {
            
            String hobby = "~~";
            fw.wirte(hobby)

        } catch (Exception e) {
            //
        }
    }
}
```
FileReder
```
public class FileReaderExample {
    public static void main(String[] args) {
        try(FileReader fr = new FileReader(폴더경로 + "파일명.확장자")){
            // 버퍼를 사용하여 텍스트를 줄 단위로 읽어오기
            BufferReader br = new BufferReader(fr);

            while(true) {
                // readLine(); 버퍼에 저장된 파일 내용을
                // 한 줄 씩 읽어옴
                String data = br.readLine();
                if(data == null) break;

            }
        } catch (Exception e) {
            e.printStactTrace();
        }
    }
}
```

- 객체 입출력 **직렬화, 역직렬화**   
객체를 파일이나 네트워크로 전송하기 위해 byte로 변환하고(직렬화), 변환되어 저장된 바이트 스트림을 다시 원래 객체 형태로 복원(역직렬화) 하는 것을 의미한다.     
스트림은 바이트나 문자 단위로 데이터를 전달하는 통로이기 때문에, 객체와 같은 복잡한 구조는 통과할 수 없음. 
```
// class는 직렬화, 역직렬화를 위한 인터페이스를 상속받음
public class Snack implements Serializable {
    
}

// 출력
try(FileOutputStream fos = new FileOutputStream(폴더경로+"파일이름.확장자")) {
    // 객체를 통째로 저장하는 보조스트림
    ObjectOutputStream oos = new ObjectOutputStream(fos);

    // 객체 직렬화
    oos.writeObject(Snack);
} catch(Exception e) {
    //
}

// 입력
try(FileInputStream fis = new FileInputStream(폴더경로 + "파일명.확장자")) {
    
    // 보조스트림
    ObjectInputStream ois = new ObjectInputStream(fis);

    // 바이트로 저장된 객체를 불러와서 역직렬화
    // 역직렬화 된 객체는 Object 타입이므로 캐스팅 필요
    Snack snack = (Snack) ois.readObject();
    
} catch() {

}
```

**내부클래스, 익명클래스**
인터페이스는 인터페이스 자체로 객체 생성X
인터페이스 = 규격서 = 설계도를 만들기 위한 설계도

자바는 변수에 함수를 넣을 수 없음
근데 익명클래스로 감싸서 넣는 건 가능
자바는 주고싶은 함수를 객체에 넣어서 전달 
익명클래스 , 콜백

익명클래스를 간소화 시킨 것 -> 람다
자바스크립트 화살표 함수 -> 함수 시그니쳐를 간소화 한 것