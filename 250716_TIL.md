## TIL - 2025.07.16

### ğŸ” ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©

#### ìŠ¤í”„ë§: ë¡œê·¸, DTO

**ë¡œê·¸**   
ë¡œê·¸ì˜ ê¸°ë³¸ ìš”ì†Œ - ê°ì‹œ, ëª¨ë‹ˆí„°ë§, ì¬í•´ë³µêµ¬   

1. ë¡œê·¸ ë‚´ìš©
2. ë¡œê·¸ ë ˆë²¨ - ì¤‘ìš”ë„
    - TRACE: ë‹¨ìˆœíˆ ê°ì²´ê°€ ìƒì„±ë˜ê±°ë‚˜, í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê±°ë‚˜ í•˜ëŠ” ë¡œê·¸ë¥¼ ì°ì„ ë•Œ
    - DEBUG: ê°œë°œí•˜ë©´ì„œ ë³€ìˆ˜ê°’ì„ ì¶”ì í•˜ê±°ë‚˜ ë””ë²„ê¹… ìš©ë„
    - INFO: ìš´ì˜ì„œë²„ì˜ ì¼ë°˜ì ì¸ ë‚´ìš©ì„ ì‘ì„±(ì„œë²„ê°€ ì‹¤í–‰, íŠ¹ì • í•µì‹¬ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê±°ë‚˜ í–ˆì„ ê²½ìš°)
    - WARN: ë­”ê°€ ì´ìƒì´ ìƒê¸´ ê²½ìš°, ë‹¤ë§Œ í”„ë¡œê·¸ë¨ì— í° ìœ„í•´ëŠ” ì•„ë‹Œ ê²½ìš°
    - ERROR: ì»¤ë‹¤ë€ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê±°ë‚˜ í”„ë¡œê·¸ë¨ì— ì¹˜ëª…ì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°
    - FATAL: ì‹œìŠ¤í…œ ì¥ì• 
3. ë¡œê·¸ê°€ ì°íŒ ì‹œê°„
4. ë¡œê·¸ê°€ ì°íŒ ìœ„ì¹˜(íŒŒì¼ ê²½ë¡œ)
```
@Slf4j // ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
public class Controller {
    log.trace("~");
    log.info("~");
    log.debug("~");
    log.warn("~");
    log.error("~");
}
```

**DTO**   
ë°ì´í„°ë¥¼ ìº¡ìŠí™”í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ ê°„, ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ì— ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê°ì²´. DTOë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì´ ìˆë‹¤.   
- ì…ë ¥ ë°ì´í„° ìº¡ìŠí™”
```
// ê¸°ì¡´ íŒŒë¼ë¯¸í„° ì…ë ¥ ë°©ì‹
// 1.
public ResponseEntity<?> post(@RequestParam("id") String id,
                              @ReuestParam("name") String name)
// 2.
public ResponseEntity<?> post(@RequestBody Member member) {}

// DTO ë°©ì‹
// DTO í´ë˜ìŠ¤
@Getter ~ @Builder
public class MemberRequestDto {
    private String id;
    private String name;

    // entityë¥¼ dtoë¡œ ë³€í™˜í•˜ëŠ” ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œ
    public static MemberRequestDto from(Member member) {
        return MemberRequestDto.builder()
                               .id()
                               .name()
                               .build()
    }
}

// Controller
public ResponseEntity<?> post(@RequestBody Member member) {
    //
    MemberRequestDto.from(member)
}
```
- ìœ íš¨ì„± ê²€ì¦ ë¶„ë¦¬
```
// DTO 
public class Request {

    @NotEmpty(message = "") // ì—¬ê¸°ì— ê²€ì¦ ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì„œ ì…ë ¥ê°’ì„ ê²€ì¦í•¨
    private String name;
}

/* 
    ê²€ì¦ ì–´ë…¸í…Œì´ì…˜ ì¢…ë¥˜
    @NotNull: null ê°’ì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ, NotNullì€ ê°ì²´íƒ€ì…ì—ì„œë§Œ ë™ì‘. int íƒ€ì…ì€ Integerë¡œ ë°›ì•„ì•¼í•¨
    @NotBlank: null, ê³µë°±ë¬¸ìì—´ì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ
    @Size: ë¬¸ìì—´ì˜ ê¸¸ì´ë‚˜ ì»¬ë ‰ì…˜ì˜ í¬ê¸°ë¥¼ ì œí•œ
    @Pattern: ì •ê·œì‹ íŒ¨í„´ì„ ê²€ì¦
    @Min/@Max: ìˆ«ì ê°’ì˜ ìµœì†Œ/ìµœëŒ€ ì œí•œ
*/

// Controller
@postMapping
public ResponseEntity<?> create(@RequestBody @Valid ~~
                                BindingResult result) {
    // @Valid + BindingResult ë¡œ ê²€ì¦ ê²°ê³¼ ì²˜ë¦¬

    // ê²€ì¦ ê²°ê³¼ ì—ëŸ¬ ë°œìƒ
    if(result.hasError()) {
        ~~
        result.getFieldErrors().getDefaultMessage
    }
}
```
- ê°€ë…ì„± í–¥ìƒ   
```
@JsonProperty: í´ë˜ìŠ¤ í•„ë“œì™€ JSON ì‘ë‹µ ë°ì´í„° í•„ë“œ ì´ë¦„ì„ ë‹¤ë¥´ê²Œ ì„¤ì •í•  ë•Œ ì‚¬ìš©
@JsonProperty("user_name")
private String name;


@JsonIgnore: íŠ¹ì • í•„ë“œë¥¼ JSON ì‘ë‹µì—ì„œ ì œì™¸
@JsonIgnore
private String password;


@JsonFormat: ë‚ ì§œ/ì‹œê°„ ë°ì´í„°ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•  ë•Œ í˜•ì‹ì„ ì§€ì •
@JsonFormat(pattern = "yyyyë…„ MMì›” ddì¼")
private LocalDate time;
```
