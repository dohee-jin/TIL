## TIL - 2025.07.18

### ğŸ” ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©

#### ìŠ¤í”„ë§: ë¹ˆ ê´€ë¦¬, ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©, MVC ì˜ì¡´ì„± ì£¼ì…

**ë¹ˆ(Bean) ê´€ë¦¬**   
ìŠ¤í”„ë§ì—ì„œ ë¹ˆì€ ìŠ¤í”„ë§ IoC ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤. ìŠ¤í”„ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ê°ì²´ì˜ ìƒì„±, êµ¬ì„±, ê´€ë¦¬ ë° ì†Œë©¸ì„ ì±…ì„ì§€ê³  ê´€ë¦¬í•œë‹¤.
```
// ë¹ˆ ë“±ë¡
ìŠ¤í”„ë§ì—ê²Œ ê´€ë¦¬ë¥¼ ìœ„ì„í•  ê°ì²´ë“¤ì„ ë“±ë¡í•˜ê¸° ìœ„í•˜ì—¬ ë¹ˆ ë“±ë¡ì„ í•´ì•¼ í•œë‹¤.
@Component ë˜ëŠ” ê° í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì— ë§ê²Œ @Service, @Repository, @Contorller ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì¤€ë‹¤.

@Component: ì¼ë°˜ì ì¸ ë¹ˆ
@Service: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ê³  ìˆëŠ” ì„œë¹„ìŠ¤ ê³„ì¸µ ì •ì˜
@Repository: ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ(DAO) ì •ì˜
@Controller: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ ì •ì˜

controller(ì›¹ ìš”ì²­, ì‘ë‹µ) >> service(ë°ì´í„° ê°€ê³µ) >> repository(ë°ì´í„° CRUD, DB ì ‘ê·¼)
```

**ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©**
```
// Controller
@Controller ë˜ëŠ” @RestController
public class Controller {
    // ì •ì œëœ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ì˜ì¡´ ê°ì²´ service ì •ì˜ 
    private final Service service;

    // ìƒì„±ìë¡œ ì˜ì¡´ì„± ì£¼ì…

    // í•„ìš”í•œ ì˜ì¡´ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ê²°í•©í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜
    // ìƒì„±ìê°€ í•˜ë‚˜ë©´ ìƒëµ ê°€ëŠ¥ 
    @Autowired 
    public Controller(Service service) {
        this.service = service
    }
}

// Service
@Service
public class Service {
    // ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ì˜ì¡´ ê°ì²´ repository ì •ì˜
    private final Repository repository;

    // ìƒì„±ìë¡œ ì˜ì¡´ì„± ì£¼ì…
    // @Autowired
    public Service(Repository repository) {
        this.repository = repository;
    }
}

// Repository
@Repository
public class Repository {

}
```
ë¡¬ë³µì„ í™œìš©í•˜ë©´ ë” ê°„ë‹¨í•˜ê³  ê°€ë…ì„± ë†’ê²Œ ì‘ì„±ê°€ëŠ¥í•˜ë‹¤.
```
// Controller
@RestController

// final í•„ë“œë§Œ ê³¨ë¼ì„œ ìƒì„±ì ìƒì„±í•´ì¤Œ
// ìƒì„±ìì™€ Autowired ìƒëµ ê°€ëŠ¥
@RequiredArgsConstructor 
public class Controller {
    // ì˜ì¡´ ê°ì²´ 
    private final Service service;
}

// Service
@Service
@RequiredArgsConstructor 
public class Service {
    // ì˜ì¡´ ê°ì²´ 
    private final Repository repository;
}

// Repository
@Repository
@RequiredArgsConstructor 
public class Repository {
}
```
ì•„ë˜ ì–´ë…¸í…Œì´ì…˜ë“¤ì€ @SpringBootApplication ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ëŒ€ë¶€ë¶„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì¤Œ
```
// ìë°” í´ë˜ìŠ¤ë¥¼ ì„¤ì • íŒŒì¼ë¡œ ë§Œë“¬
@Configuration 

// ì§ì ‘ ê°ì²´ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
// ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ìŠ¤í”„ë§ì´ @Component, @Service, @Repositoryë¡œ 
// ìë™ìœ¼ë¡œ ë¹ˆ ë“±ë¡ì„ í•´ì¤Œ
@Bean

// íŠ¹ì • íŒ¨í‚¤ì§€ ì´í•˜ì—ì„œ @Componentê°€ ë¶™ì€ 
// í´ë˜ìŠ¤ë“¤ì„ ìë™ìœ¼ë¡œ ì°¾ì•„ì„œ ë¹ˆìœ¼ë¡œ ë“±ë¡
// @Controller, @Service, @Repositoryì˜ ë‚´ë¶€ì— @Componentê°€ ì‘ì„±ë˜ì–´ìˆìŒ
@ComponentScan(basePackages = "")
```

**MVC ì˜ì¡´ì„± ì£¼ì…**   
ìŠ¤í”„ë§ 3ê³„ì¸µ êµ¬ì¡°   
ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¸ ê°œì˜ ì£¼ìš” ê³„ì¸µ, Controller, Serivce, Repositoryë¡œ ë‚˜ëˆˆë‹¤. 
- Controller   
    - Http ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ë°˜í™˜
    - URL ë§¤í•‘ì„ í†µí•´ ë©”ì†Œë“œë¥¼ ì‹¤í–‰
    - Service ê³„ì¸µìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ë¥¼ ìœ„ì„
```
@RestController
@RequestMapping("")
@RequiredArgsConstructor
public class Controller {

    // ì˜ì¡´ ê°ì²´ ì„¤ì •
    private Service service;

    @GetMapping("")
    public ResponseEntity<?> list() {
        
        // í•„ìš”í•œ ì²˜ë¦¬ë¥¼ serviceì—ê²Œ ìœ„ì„
        List<DTO> response = service.listProcess();

        return ResponseEntity.ok(response);
    }
}
```
- Service  
    - í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„(ë°ì´í„° ë³€í™˜ ë° ì˜ˆì™¸ì²˜ë¦¬)
    - íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë‹´ë‹¹
```
@Service
@RequiredArgsConstructor
public class Service {

    // ì˜ì¡´ ê°ì²´ ì„¤ì •
    private Repository repository;

    // ê° ê¸°ëŠ¥ë³„ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ì‘ì„±
    public List<DTO> listProcess() {
        // ë¦¬í¬ì§€í† ë¦¬ì—ê²Œ ë°ì´í„°(DB) ì²˜ë¦¬ë¥¼ ìœ„ì„
        repository.();
        return ;
    }
}
```
- Repository
    - ë°ì´í„°ë² ì´ìŠ¤ì™€ ì§ì ‘ì ì¸ í†µì‹  ë‹´ë‹¹
    - CRUD ì‘ì—… ìˆ˜í–‰
```
@Repository
@RequiredArgsConstructor
public class Repository {
    // ë°ì´í„° ì²˜ë¦¬ ë¡œì§ ì‘ì„±
    // ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°
}
```
   
ê° ê³„ì¸µ ê°„ ë°ì´í„° ì „ë‹¬ ì‹œ DTOë¥¼ í™œìš©í•˜ì—¬ í•„ìš”í•œ ë°ì´í„°ë§Œ ì „ë‹¬í•  ìˆ˜ ìˆê²Œ ë¡œì§ì„ ì‘ì„±í•´ì•¼ í•œë‹¤.   


#### SQL: DB ì„¤ì¹˜ 
Oracle database XE ì„¤ì¹˜   
setup.exeë¥¼ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰   
Oracle ê´€ë¦¬ì ê³„ì •: system/oracle(ì—°ìŠµìš© db)   
![alt text](image-2.png)   
ì‹¤í–‰ í›„ ì‚¬ìš©ìëª… ì…ë ¥: system / ë¹„ë°€ë²ˆí˜¸: oracle ì…ë ¥   
vscode ì—ì„œ sql developer í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜   
![alt text](image-3.png)   



