## TIL - 2025.09.02

### ğŸ” ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©
- action í•¨ìˆ˜
- ë¬´í•œìŠ¤í¬ë¡¤(ë³µìŠµ)

---

#### action í•¨ìˆ˜   
loader í•¨ìˆ˜ëŠ” CRUD ì¤‘ Read ìš”ì²­ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ê³    
action í•¨ìˆ˜ëŠ” Create, Update, Delete ìš”ì²­ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•  ë•Œ ì‚¬ìš©í•œë‹¤.   
action í•¨ìˆ˜ë„ loader ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë¼ìš°íŒ… ì„¤ì •ìœ¼ë¡œ ì´ë™í•˜ì—¬    
api ìš”ì²­ì„ í•  í˜ì´ì§€ì— >> **action: í•¨ìˆ˜** << ì„ ì‘ì„±í•œë‹¤.   
```
{
    index: true,
    element: <EventPage />,
    action: async () => {
        console.log('action í•¨ìˆ˜ ì‹¤í–‰');
    },
}
```
action í•¨ìˆ˜ë„ loader í•¨ìˆ˜ì²˜ëŸ¼ ì•„ì›ƒì†Œì‹±ë„ ê°€ëŠ¥í•˜ë‹¤.   
ì•„ì›ƒì†Œì‹± í•œ action í•¨ìˆ˜ë„ ë¼ìš°íŠ¸ ì„¤ì • íŒŒì¼ë¡œ ì´ë™í•˜ì—¬ ì„í¬íŠ¸í•˜ê³  action: ì— ì‘ì„±í•˜ë©´ ëœë‹¤.
```
...
{
    index: true,
    element: <EventPage />,
    action: saveAction,
}
...
```

loader í•¨ìˆ˜ëŠ” í˜ì´ì§€ê°€ ë¼ìš°íŒ… ë˜ëŠ” ìˆœê°„ ì‹¤í–‰ë˜ì§€ë§Œ action í•¨ìˆ˜ëŠ” í˜ì´ì§€ê°€ ë¡œë”©ë˜ê³  ë°”ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.   

action í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” Form ì»´í¬ë„ŒíŠ¸ì™€ method ì†ì„±(í•„ìˆ˜ ì†ì„±)ì„ ì§€ì •í•´ì•¼ í•œë‹¤.   
method ì†ì„±ì—ëŠ” ìš”ì²­í•˜ëŠ” Http ë©”ì†Œë“œ ì´ë¦„ì„ ì‘ì„±í•œë‹¤.(GET, POST, DELETE, PUT)
```
<Form
    method = 'POST'
    className={styles.form}
    noValidate>
    <p>
        <label htmlFor='title'>Title</label>
        <input
            id='title'
            type='text'
            name='title'
            required
            ref={titleRef}
        />
    </p>
</Form>
```
POST ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•´ì„œ formì— ì…ë ¥í•œ ê°’ì„ action í•¨ìˆ˜ì—ì„œ ì½ì–´ì™€ì•¼ ë˜ëŠ”ë°
form ì…ë ¥ ê°’ì€ loaderì™€ ë§ˆì°¬ê°€ì§€ë¡œ react routeê°€ ê°ì²´ í˜•íƒœ{context, params, request}ë¡œ ì œê³µí•œë‹¤.   
![alt text](/img/image-19.png)   

```
export const eventItemLoader = async (x) => {
    //const response = await fetch(`${DEFAULT_URL}/${eventId}`)
    console.log(x)
    //return response;
}
```
action í•¨ìˆ˜ì—ì„œëŠ” requestë¥¼ ê°€ì ¸ì˜¨ë‹¤. requestì•ˆì—ëŠ” ìš”ì²­ ë©”ì†Œë“œì™€ formdata ë“± ì—¬ëŸ¬ ì •ë³´ê°€ ë“¤ì–´ìˆë‹¤.   
ì…ë ¥í•œ ì •ë³´ëŠ” request.formData()ë¡œ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤.
```
export const saveAction = async ({ request }) => {

    // formì— ì…ë ¥í•œ ê°’ ê°€ì ¸ì˜¤ê¸°
    // awaitë¥¼ ë¶™ì—¬ì„œ ë¹„ë™ê¸°ì  ì‹¤í–‰ì—ì„œ ìˆœì„œë¥¼ ë³´ì¥í•´ì¤Œ
    const formData = await request.formData();
   
    const payload = {
        title: formData.get('title'),
        desc: formData.get('description'),
        beginDate: formData.get('date'),
        imageUrl: formData.get('image')
    };
    // console.log(payload);

    const response = await fetch('http://localhost:9000/api/events', {
        method: request.method,
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
    })

    if(!response.ok) {
        throw new Error('ì´ë²¤íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!')
    }

};
```

- useSubmit   
Form ì»´í¬ë„ŒíŠ¸ ì—†ì´ action í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±° í•˜ëŠ” ê²ƒì„ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¼ê³  ë¶€ë¥´ê³ 
useSubmit() í›…ì„ ì‚¬ìš©í•˜ì—¬ action í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.    
```
const submit = useSubmit();

const handleRemove = e => {
    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸
    submit(null, {method:'DELETE'});
};

return (
    <>
        <button onClick={handleRemove}>Delete</button>
    </>
)
```
- redirect   
action, loader í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ í•˜ê¸° ìœ„í•´ ì‚¬ìš©.   
useNavigate ì™€ ê°™ì€ í›…ë“¤ì€ ì»´í¬ë„ŒíŠ¸ ì•„ë˜ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
```
return redirect(`/~~`) 
```
---

#### ë¬´í•œìŠ¤í¬ë¡¤(ë³µìŠµ)
- ë°±ì—”ë“œ   
ë¨¼ì € í˜ì´ì§• êµ¬í˜„ì—ì„œ ì‚¬ìš©ë˜ëŠ” offeset, limitì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ QueryDsl ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ê³  ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ì—ˆë‹¤.   

build.gradleì— QueryDsl ì˜ì¡´ì„± ì¶”ê°€
```
dependencies {
    ...
    implementation 'com.querydsl:querydsl-jpa:5.0.0:jakarta'
    annotationProcessor 'com.querydsl:querydsl-apt:5.0.0:jakarta'
    annotationProcessor 'jakarta.annotation:jakarta.annotation-api'
    annotationProcessor 'jakarta.persistence:jakarta.persistence-api'
}
```
config í´ë”ì— QueryDslConfig íŒŒì¼ ì¶”ê°€  
```
@Configuration
public class QueryDslConfig {

    @PersistenceContext // JPAì—ì„œ ì£¼ì…
    private EntityManager em;

    @Bean
    public JPAQueryFactory factory() {
        return new JPAQueryFactory(em);
    }
}
```
ê¸°ì¡´ì— ë°°ì› ë˜ í˜ì´ì§€ ì²˜ë¦¬ëŠ” Page ê°ì²´ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ, ì´ë²ˆì—ëŠ” ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„ì„ ìœ„í•´ Slice ê°ì²´ë¥¼ ì‚¬ìš©í–ˆë‹¤. SliceëŠ” Pageì™€ ë‹¬ë¦¬ ì „ì²´ í˜ì´ì§€ ìˆ˜ë‚˜ ì „ì²´ ë°ì´í„° ìˆ˜ë¥¼ ê³„ì‚°í•˜ì§€ ì•Šê³ , ë‹¨ì§€ ë‹¤ìŒ í˜ì´ì§€ì˜ ì¡´ì¬ ì—¬ë¶€ë§Œ í™•ì¸í•˜ë©´ ëœë‹¤.    

ë¬´í•œ ìŠ¤í¬ë¡¤ì€ ë‹¤ìŒ ë°ì´í„°ë¥¼ ì´ì–´ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ê¸°ì¡´ Page ê°ì²´ì—ì„œ í•„ìš”í•˜ë˜ ì „ì²´ í˜ì´ì§€ ìˆ˜ ì²˜ë¦¬ì— ëŒ€í•œ ì¿¼ë¦¬ê°€ í•„ìš”ì—†ìœ¼ë©°
```
--- Sliceì—ì„œëŠ” í•„ìš”ì—†ìŒ

Long total = factory
    .select(meetingParticipant.count())
    .from(meetingParticipant)
    .where(meetingParticipant.participant.id.eq(id))
    .fetchOne(); 
```
hasNextë¡œ ë‹¤ìŒ ë°ì´í„°ì˜ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ì—¬ ë‹¤ìŒ ìš”ì²­ì„ ë³´ë‚´ê¸° ë•Œë¬¸ì—   
ë¬´í•œìŠ¤í¬ë¡¤ì—ì„œëŠ” Slice ê°ì²´ ì‚¬ìš©ì´ ì„±ëŠ¥ê³¼ ì½”ë“œ ì‘ì„± ë©´ì—ì„œ ë” íš¨ìœ¨ì ì¸ ë°©ë²•ì´ë‹¤.   

ë¬´í•œ ìŠ¤í¬ë¡¤ì—ì„œë„ ì„œë²„ì— ì €ì¥ëœ ë°ì´í„°ì˜ ëì„ í™•ì¸í•´ì„œ í˜ì´ì§•ì„ ì¢…ë£Œí•œë‹¤.

ì›ë˜ ìš”ì²­ë°›ì•„ì˜¬ ë°ì´í„°ë³´ë‹¤ í•œ ê°œ ë” ì¡°íšŒí•˜ì—¬ ë°›ì•„ì˜¬ ë°ì´í„°(ex) 5ê°œ) ë³´ë‹¤    
ì„œë²„ì—ì„œ ì¡°íšŒí•´ì˜¨ ë°ì´í„°(+ 1ê°œ ë” ìš”ì²­)ì˜ í¬ê¸°ê°€ í¬ë©´ ê³„ì† í˜ì´ì§• ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ê³    
ì¡°íšŒí•´ì˜¨ ë°ì´í„°ì˜ í¬ê¸°ê°€ ì‘ë‹¤ë©´ ì €ì¥ëœ ë°ì´í„°ì˜ ëì„ì„ íŒë‹¨í•˜ê³  í˜ì´ì§•ì„ ì¢…ë£Œí•œë‹¤.
Repository
```
public Slice<Event> findEvents(Pageable pageable) {

    // ëª©ë¡ ì¡°íšŒ
    List<Event> eventList = factory
            .selectFrom(event)
            .orderBy(event.createdAt.desc())
            .offset(pageable.getOffset()) // ëª‡ê°œë¥¼ ê±´ë„ˆë›¸ì§€
            .limit(pageable.getPageSize() + 1) // ëª‡ê°œë¥¼ ì¡°íšŒí• ì§€
            .fetch();

    // ì¶”ê°€ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•  ë³€ìˆ˜
    boolean hasNext = false;
    if(eventList.size() > pageable.getPageSize()){
        hasNext = true;

        // ì‹¤ì œë¡œëŠ” 5ê°œë§Œ ë¦¬í„´í•´ì•¼ í•¨, 6ë²ˆì§¸ ë°ì´í„°ëŠ” ì‚­ì œ
        eventList.remove(eventList.size() - 1);
    }

    return new SliceImpl<>(eventList, pageable, hasNext);
}
```
Service
```
@Transactional(readOnly = true)
public Map<String, Object> getEvents(int pageNo) {

    Slice<Event> eventSlice = eventRepository.findEvents(PageRequest.of(pageNo-1, 4));

    List<EventResponse> events = eventSlice.getContent()
            .stream()
            .map(EventResponse::from)
            .collect(Collectors.toList());

    return Map.of(
            "hasNext", eventSlice.hasNext(),
            "eventList", events
    );
}
```
ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë„ Slice ê°ì²´ëŠ” Pageable ì „ì²´ë¥¼ ë°›ì„ í•„ìš” ì—†ì´ í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ì™€ ì‚¬ì´ì¦ˆë§Œ ë°›ìœ¼ë©´ ì¶©ë¶„í•˜ë¯€ë¡œ ì½”ë“œê°€ í›¨ì”¬ ê°„ê²°í•´ì§„ë‹¤.    
Page ê°ì²´ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” Pageableì„ í†µí•´ í˜ì´ì§€ ë²ˆí˜¸, ì‚¬ì´ì¦ˆ, ì •ë ¬ê¹Œì§€ ëª¨ë‘ ë°›ì•„ì•¼ í•˜ê³ ,    
ê²°ê³¼ë„ ì „ì²´ í˜ì´ì§€ ìˆ˜ë‚˜ ì´ ë°ì´í„° ìˆ˜ë¥¼ í¬í•¨í•œ Page ê°ì²´ë¡œ ë°˜í™˜í•´ì•¼ í•˜ì§€ë§Œ, Sliceë¥¼ ì‚¬ìš©í•˜ë©´    
ë‹¤ìŒ ë°ì´í„° ì¡´ì¬ ì—¬ë¶€ë§Œ íŒë‹¨í•˜ë©´ ë˜ë¯€ë¡œ ìš”ì²­ê³¼ ì‘ë‹µ ëª¨ë‘ ê°„ë‹¨í•´ì§„ë‹¤.
```
--- Page ê°ì²´
@GetMapping("/meetings")
public ResponseEntity<?> getMyMeetings(
        @AuthenticationPrincipal String email,
        @PageableDefault(page = 0, size = 3, sort = "createdAt", direction = Sort.Direction.DESC) Pageable pageable
) {
    Page<MeetingInfoDto> response = myPageService.getMyMeetings(email, pageable);
    return ResponseEntity.ok(ApiResponse.success("ë§ˆì´í˜ì´ì§€ ë‚˜ì˜ ì°¸ì—¬ ëª¨ì„ ì •ë³´ ì¡°íšŒë¥¼ ì„±ê³µí–ˆìŠµë‹ˆë‹¤.", response));
}
```
```
--- Slice ê°ì²´
@GetMapping
public ResponseEntity<?> getList(
        @RequestParam(defaultValue = "1") int page
) {
    Map<String, Object> events = eventService.getEvents(page);
    return ResponseEntity.ok().body(events);
}
```

- í”„ë¡ íŠ¸ì—”ë“œ
    - ì„œë²„ ë°ì´í„° ì¡°íšŒ   
    ì´ë²¤íŠ¸ í˜ì´ì§€ ë¼ìš°íŒ… ì‹œ ì‹¤í–‰ë˜ë˜ ì¡°íšŒ api ìš”ì²­ì€ ë¬´í•œìŠ¤í¬ë¡¤ êµ¬í˜„ì„ ìœ„í•´ ë¼ìš°í„° ì„¤ì •ì—ì„œ ì œê±° í•œë‹¤.
    ```
    {
        index: true,
        element: <EventPage />,
        // ë¬´í•œìŠ¤í¬ë¡¤ì‚¬ìš©ì„ ìœ„í•´ ì‚­ì œí•¨
    },
    ```
    ë‹¤ì‹œ EventPageë¡œ ì´ë™í•˜ì—¬ useEffectë¥¼ ì‚¬ìš©í•´ì„œ ì¡°íšŒ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ë³€ê²½í–ˆë‹¤.
    í˜ì´ì§€ê°€ ë¬´í•œìŠ¤í¬ë¡¤ë˜ë©´ì„œ ë³€ê²½ë˜ë‹ˆê¹Œ currentPageë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ë¥¼ í•˜ë„ë¡ ì‘ì„±í–ˆë‹¤.   
    
    ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ë„ í˜ì´ì§€ ìš”ì²­ì´ ë°˜ë³µë˜ë©´ì„œ ë¦¬ë Œë”ë§ì´ ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— useStateë¡œ ìƒíƒœê´€ë¦¬ë¥¼ í•˜ë„ë¡ ë³€ê²½í–ˆë‹¤.

    ë°±ì—”ë“œë¡œë¶€í„° eventListë¥¼ ë°›ì•„ì˜¬ ë•Œ hasNext ë„ ë°›ì•„ì˜¤ê³  ìˆë‹¤. ì´ hasNextë„   
    ìƒíƒœ ê´€ë¦¬ í•˜ì—¬ isFinishê°€ trueë©´, ë” ì´ìƒ ê°€ì ¸ì˜¬ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì¡°íšŒ ìš”ì²­ì„ í•˜ì§€ ì•Šë„ë¡ ë¡œì§ì„ ì‘ì„±í–ˆë‹¤.   
    ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ hasNextëŠ” ë‹¤ìŒ ë°ì´í„°ê°€ ìˆìœ¼ë©´ trueë¥¼ ë°˜í™˜í•œë‹¤.   

    hasNext = true -> isFinish(!hasNext) = false    
    hasNext = false -> isFinish(!hasNext) = true, ë” ì´ìƒ ì¡°íšŒ X
    ```
    // í˜„ì¬ í˜ì´ì§€ë²ˆí˜¸ë¥¼ ìƒíƒœë¡œ ê´€ë¦¬
    const[currentPage, setCurrentPage] = useState(1);

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ìƒíƒœ ê´€ë¦¬
    const[eventList, setEventList] = useState([]);

    // ë” ì´ìƒ ê°€ì ¸ì˜¬ ë°ì´í„°ê°€ ìˆëŠ”ì§€ ì—¬ë¶€
    const[isFinish, setIsFinish] = useState(false);

    const fetchEvents = async () => {

        if(isFinish) return;

        const response = await fetch(`http://localhost:9000/api/events?page=${currentPage}`);
        const {hasNext, eventList: events} = await response.json();

        // ê¸°ì¡´ eventì— ìƒˆë¡­ê²Œ ê°€ì ¸ì˜¨ event ë“¤ì„ ë¶™ì—¬ì„œ ë Œë”ë§ ì§„í–‰
        setEventList(prev => [...prev, ...events]);
        
        // í˜ì´ì§€ë²ˆí˜¸ ê°±ì‹ 
        setCurrentPage(prev => prev + 1);
        setIsFinish(!hasNext);

        console.log(currentPage)
    };
    ```
    currentPageê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ fetchEventê°€ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— useEffect ì˜ì¡´ì„± ë°°ì—´ì— ë³€ê²½ì„ ê°ì§€í•  ëŒ€ìƒì¸ currentPageë¥¼ ë„£ì–´ì¤€ë‹¤.
    ```
    useEffect(() => {
        fetchEvents();
    } ,[currentPage])
    ```

    - ì˜µì €ë²„ë¡œ ë¬´í•œìŠ¤í¬ë¡¤ êµ¬í˜„  
    ì˜µì €ë²„ëŠ” IntersectionOberver ê°ì²´ë¡œ ìƒì„±í•˜ê³  callback í•¨ìˆ˜ ì•ˆì— ë‚´ìš©ì„ ì‘ì„±í•œë‹¤.   
    ì˜µì €ë²„ëŠ” ë‘ ê°œì˜ íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•˜ë©° ì²«ë²ˆì§¸ ì¸ìë¡œëŠ” callback í•¨ìˆ˜ë¡œ ë°›ê³    
    ë‘ë²ˆì§¸ ì¸ìëŠ” option ê°ì²´ë¥¼ ë°›ëŠ”ë‹¤.   
      
    callback í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ëŠ” ê°ì‹œëŒ€ìƒ ë°°ì—´ì¸ entriesë¥¼ ë„£ì–´ì¤€ë‹¤
    ```
    const observer = new IntersectionObserver((entries) => {

    }, options)
    ```
    entries ë°°ì—´ì˜ ê° ê°ì‹œëŒ€ìƒ entryëŠ” intersection ì´ë¼ëŠ” ìƒíƒœ ì •ë³´ë¥¼ ê°€ì§„ë‹¤.   
    .isIntersecting ìœ¼ë¡œ ê°ì‹œëŒ€ìƒì´ ë·°í¬íŠ¸ ì•ˆì— ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸ ê°€ëŠ¥í•Ÿ.
    ```
    if(entries[0].isIntersecting) {
        // ìš”ì†Œê°€ í™”ë©´ì— ë“¤ì–´ì™”ì„ ë•Œ ì‹¤í–‰í•  ì½”ë“œ ì‘ì„±
    }
    ```
    
    ì˜µì €ë²„ë¡œ ë¬´í•œìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ë¨¼ì € ê°ì‹œ ëŒ€ìƒì„ ì„¤ì •í•´ì•¼ í•œë‹¤.  
    useEffect ì•ˆì—ì„œ ì˜µì €ë²„ë¥¼ ìƒì„±í•˜ê³  EventList ì•„ë˜ì— div ë¥¼ í•˜ë‚˜ ë°°ì¹˜í•˜ì—¬    
    ì˜µì €ë²„ì˜ ê°ì‹œëŒ€ìƒìœ¼ë¡œ ì„¤ì •í–ˆë‹¤.  

    div íƒœê·¸ë¥¼ ê°ì‹œí•˜ê¸° ìœ„í•´ì„œ useRefë¡œ div íƒœê·¸ë¥¼ ê°€ì ¸ì™”ë‹¤.   
    ë¬´í•œ ìŠ¤í¬ë¡¤ ë‚´ë¶€ì—ë„ isFinish ì¡°ê±´ì„ ë°°ì¹˜í•˜ì—¬ isFinishê°€ true(ê°€ì ¸ì˜¬ ë°ì´í„° ì—†ìŒ)ë©´   
    ë¬´í•œìŠ¤í¬ë¡¤ë„ ë™ì‘í•˜ì§€ ì•Šë„ë¡ ë¡œì§ì„ ì‘ì„±í–ˆë‹¤.
    ```
    const observerRef = useRef();

    useEffect(() => {

        // ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ìœ„í•œ ì˜µì €ë²„ë¥¼ ìƒì„±
        const observer = new IntersectionObserver((entries) => {

            if(isFinish) return;

            if(entries[0].isIntersecting) {
                // console.log('ê°ì‹œëŒ€ìƒ ë°œê²¬!');
                fetchEvents();
            }
        }, {
            // ê´€ì°°í•˜ê³  ìˆëŠ” ëŒ€ìƒì˜ ë†’ì´ê°€ 50% ì •ë„ ë³´ì¼ ë•Œ ê°ì§€ ì‹¤í–‰
            threshold: 0.5
        })

        // ê°ì‹œëŒ€ìƒ ì„¤ì •
        if(observerRef.current){
            observer.observe(observerRef.current);
        }

        return () => observer.disconnect();

    }, [currentPage])

    return (
        <div>
            <ul>
                <EventList eventList={eventList}/>
                {/*ë¬´í•œìŠ¤í¬ë¡¤ ì˜µì €ë²„ë¥¼ ìœ„í•œ ê°ì‹œëŒ€ìƒ íƒœê·¸*/}
                <div style={{height: 300, background: 'yellow'}} ref={observerRef}>
                    {/*ë¡œë”©ë°”, ìŠ¤ì¼ˆë ˆí†¤ í’€ë°± ë°°ì¹˜*/}
                </div>
            </ul>
        </div>
    )
    ```

    useEffectì˜ cleanup í•¨ìˆ˜ì—ì„œ ì˜µì €ë²„ë¥¼ í•´ì œí•˜ê³  ìˆëŠ”ë° EventPage ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì‚¬ë¼ì§ˆ ë•Œ ê°ì‹œë¥¼ í•´ì œí•œë‹¤.
    í˜„ì¬ ì½”ë“œì—ì„œëŠ” isFinishë¡œ fetch ìš”ì²­ì„ ì œì–´í•˜ê³  ìˆì–´ trueë©´ ë” ì´ìƒ ë°ì´í„° ìš”ì²­ì„ í•˜ê³  ìˆì§€ëŠ” ì•Šì§€ë§Œ ì˜µì €ë²„ ê°ì‹œëŠ” ê³„ì†ë˜ê³  ìˆëŠ” ìƒí™©ì´ë‹¤.
    ```
    return () => observer.disconnect();
    ```

    - ìŠ¤ì¼ˆë ˆí†¤ ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜

---

### ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
#### ğŸ› ï¸ ë¬¸ì œì™€ ì›ì¸
- ë¬¸ì œ: ë°±ì—”ë“œ @PathVariable {/id} eventId ë‹¤ë¦„ 
- ì›ì¸: 

#### âœ… í•´ê²° ë°©ë²•

---

#### ğŸ› ï¸ ë¬¸ì œì™€ ì›ì¸
- ë¬¸ì œ: ìƒì„¸í˜ì´ì§€ ë‹¨ì¼ ì¡°íšŒ ì‹œ ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ê°’ì´ ì•„ë‹Œ htmlì„ ë¦¬í„´
- ì›ì¸: fetch URLì— ìŒë”°ì˜´í‘œê°€ ì˜ëª» ë“¤ì–´ê° ``ì•ˆì— ë¶ˆí•„ìš”í•œ ì‘ì€ë”°ì˜´í¬ê°€ ë“¤ì–´ê°€ ë¬¸ìì—´ë¡œ ì¸ì‹ë˜ì–´ ìš”ì²­ì´ ì˜ëª» ë‚ ì•„ê°€ê³    
Vite ê°œë°œ ì„œë²„ê°€ 404ë¥¼ ì²˜ë¦¬í•˜ë©´ì„œ index.htmlì„ ë‚´ë ¤ì£¼ê¸° ë•Œë¬¸ì— HTMLì´ ë³´ì´ëŠ” ê²ƒì„

#### âœ… í•´ê²° ë°©ë²•